function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react-router-dom"),n=require("react"),r=e(n),o=require("ahooks"),a=require("history"),u=e(require("styled-components")),i=require("nc-lazy");function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return t||(t=e.slice(0)),e.raw=t,e}var l,f,d=function(){var e=n.useRef(null),t=o.useSize(e);return[e,n.useMemo(function(){return(null==t?void 0:t.height)||0},[t])]},h={useWatcher:function(e,t){o.useEventListener(e,function(e){t(e.detail)})},emitWatcher:function(e,t){return window.dispatchEvent(new CustomEvent(e,{detail:t}))}},m=a.createBrowserHistory(),v=u.header(l||(l=s(["\n  position: sticky;\n  top: 0;\n  left: 0;\n  background: white;\n  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n"]))),p=function(e,t){var n=function(){switch(e){case"headers":return(void 0)("/src/layouts/headers/*.tsx");case"footers":return(void 0)("/src/layouts/footers/*.tsx");case"contents":return(void 0)("/src/layouts/contents/*.tsx");default:return{}}}(),r={},o=t||i.lazy;for(var a in n)r[a.split(new RegExp("/src/layouts/"+e+"/|.tsx$|/index.tsx$","g")).join("")||"index"]=o(n[a]);return r},x={headers:p("headers"),footers:p("footers"),contents:p("contents")},y=r.memo(function(e){var t=e.name,o=e.children,a=e.component,u=n.useMemo(function(){if("none"===t)return r.Fragment;var e=x[a];return e[t]||e.index||r.Fragment},[a,t]);return r.createElement(u,null,o)}),E=u.main(f||(f=s(["\n  min-height: ",";\n"])),function(e){var t=e.headerHeight,n=e.footerHeight;return"calc(100vh - "+((void 0===t?0:t)+(void 0===n?0:n))+"px)"}),g=function(e){var t=(void 0)("/src/pages/**/[a-z[]*.tsx"),n=[],o=i.lazy,a=function(e){var a;n.push({path:e.split(/\/src\/pages|\.tsx$|\/index\.tsx/g).join("")||"/",element:(a=o(t[e]),r.createElement(a,null))})};for(var u in t)a(u);return n}(),b=function(){return t.useRoutes(g)},w=r.memo(function(e){var o=e.fallback,a=m.location.pathname,u=n.useState({}),i=u[0],s=u[1],l=n.useMemo(function(){return i[a]},[i,a]),f=d(),p=f[0],x=f[1],g=d(),w=g[0],j=g[1];return h.useWatcher("CHANGE_LAYOUTS",function(e){s(function(t){return c({},t,e)})}),r.createElement(t.unstable_HistoryRouter,{history:m},r.createElement(n.Suspense,{fallback:o},(null==l?void 0:l.header)&&r.createElement(v,{ref:p},r.createElement(y,{component:"headers",name:l.header})),(null==l?void 0:l.content)&&r.createElement(E,{headerHeight:x,footerHeight:j},r.createElement(y,{component:"contents",name:null==l?void 0:l.content},r.createElement(b,null))),Boolean(null==l?void 0:l.content)||r.createElement("main",null,r.createElement(b,null)),(null==l?void 0:l.footer)&&r.createElement("footer",{ref:w},r.createElement(y,{component:"footers",name:null==l?void 0:l.footer}))))});Object.keys(t).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})}),exports.LayoutProvider=w,exports.history=m,exports.watcher=h,exports.withLayout=function(e,o){return function(){var a=t.useLocation().pathname;return n.useLayoutEffect(function(){var e;h.emitWatcher("CHANGE_LAYOUTS",((e={})[a]={header:(null==o?void 0:o.header)||"index",content:(null==o?void 0:o.content)||"index",footer:(null==o?void 0:o.footer)||"index"},e))},[]),r.createElement(e,null)}};
//# sourceMappingURL=index.js.map
